# ğŸ›ï¸ AI ì‡¼í•‘ëª° í”„ë¡œì íŠ¸

KoCLIP ê¸°ë°˜ ë©€í‹°ëª¨ë‹¬ AI ìƒí’ˆ ì¶”ì²œ ì‹œìŠ¤í…œ

> ì´ë¯¸ì§€, í…ìŠ¤íŠ¸, ë©”íƒ€ë°ì´í„°ë¥¼ í™œìš©í•œ í•˜ì´ë¸Œë¦¬ë“œ ì¶”ì²œ ì—”ì§„

---

## ğŸ“‹ ëª©ì°¨

- [ë¹ ë¥¸ ì‹œì‘ (ì‹ ê·œ íŒ€ì›)](#-ë¹ ë¥¸-ì‹œì‘-ì‹ ê·œ-íŒ€ì›)
- [ê¸°ì¡´ íŒ€ì› - ì—…ë°ì´íŠ¸ ë°›ê¸°](#-ê¸°ì¡´-íŒ€ì›---ì—…ë°ì´íŠ¸-ë°›ê¸°)
- [ë‹¤ë¥¸ ì»´í“¨í„°ì—ì„œ ì‹¤í–‰í•˜ê¸°](#-ë‹¤ë¥¸-ì»´í“¨í„°ì—ì„œ-ì‹¤í–‰í•˜ê¸°)
- [ê´€ë¦¬ì - ë°°í¬í•˜ê¸°](#-ê´€ë¦¬ì---ë°°í¬í•˜ê¸°)
- [ë¬¸ì œ í•´ê²°](#-ë¬¸ì œ-í•´ê²°)
- [í”„ë¡œì íŠ¸ êµ¬ì¡°](#-í”„ë¡œì íŠ¸-êµ¬ì¡°)
- [ê¸°ìˆ  ìŠ¤íƒ](#-ê¸°ìˆ -ìŠ¤íƒ)
- [ì£¼ìš” ê¸°ëŠ¥](#-ì£¼ìš”-ê¸°ëŠ¥)
- [API ì—”ë“œí¬ì¸íŠ¸](#-api-ì—”ë“œí¬ì¸íŠ¸)

---

## ğŸš€ ë¹ ë¥¸ ì‹œì‘ (ì‹ ê·œ íŒ€ì›)

### 1ï¸âƒ£ ì‚¬ì „ ìš”êµ¬ì‚¬í•­

**í•„ìˆ˜ ì„¤ì¹˜:**
- âœ… [Docker Desktop](https://www.docker.com/products/docker-desktop/)
- âœ… [Git](https://git-scm.com/downloads)

**ì„¤ì¹˜ í™•ì¸:**
```bash
docker --version
docker-compose --version
git --version
```

### 2ï¸âƒ£ í”„ë¡œì íŠ¸ í´ë¡ 
```bash
git clone https://github.com/asianumber7-cpu/project_v1.git
cd project_v1
```

### 3ï¸âƒ£ í™˜ê²½ ì„¤ì •
```bash
# Windows (PowerShell)
echo "DOCKER_USERNAME=jeahun" > .env

# Mac/Linux
echo "DOCKER_USERNAME=jeahun" > .env
```

### 4ï¸âƒ£ Docker ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ
```bash
docker-compose pull
```
â±ï¸ ì˜ˆìƒ ì†Œìš” ì‹œê°„: 5-10ë¶„

### 5ï¸âƒ£ ì»¨í…Œì´ë„ˆ ì‹¤í–‰
```bash
docker-compose up -d
```

**ì‹¤í–‰ í™•ì¸:**
```bash
docker-compose ps
```

### 6ï¸âƒ£ ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸°í™”
```bash
# 1. DB í…Œì´ë¸” ìƒì„±
docker-compose exec backend alembic upgrade head

# 2. ìƒ˜í”Œ ë°ì´í„° ì‚½ì…
docker-compose exec backend python -m app.seed

# 3. AI ë²¡í„° ìƒì„± (2-3ë¶„ ì†Œìš”)
docker-compose exec backend python -m app.batch_embed
```

### 7ï¸âƒ£ ì ‘ì† í™•ì¸

| ì„œë¹„ìŠ¤ | URL | ì„¤ëª… |
|--------|-----|------|
| í”„ë¡ íŠ¸ì—”ë“œ | http://localhost | React ì›¹ í˜ì´ì§€ |
| ë°±ì—”ë“œ API | http://localhost:8000 | FastAPI ì„œë²„ |
| API ë¬¸ì„œ | http://localhost:8000/docs | Swagger UI |

### 8ï¸âƒ£ ì¤‘ì§€ ë° ì¬ì‹œì‘
```bash
# ì¤‘ì§€
docker-compose down

# ì¬ì‹œì‘
docker-compose up -d

# ì™„ì „ ì‚­ì œ (ë°ì´í„° í¬í•¨)
docker-compose down -v
```

---

## ğŸ”„ ê¸°ì¡´ íŒ€ì› - ì—…ë°ì´íŠ¸ ë°›ê¸°

### ë°©ë²• 1: ë¹ ë¥¸ ì—…ë°ì´íŠ¸
```bash
cd project_v1
git pull origin main
docker-compose down
docker-compose pull
docker-compose up -d
docker-compose exec backend alembic upgrade head
```

### ë°©ë²• 2: ì™„ì „ ì¬ì„¤ì¹˜ (ë¬¸ì œ ë°œìƒ ì‹œ)
```bash
docker-compose down -v
git pull origin main
docker-compose pull
docker-compose up -d
docker-compose exec backend alembic upgrade head
docker-compose exec backend python -m app.seed
docker-compose exec backend python -m app.batch_embed
```

---

## ğŸ’» ë‹¤ë¥¸ ì»´í“¨í„°ì—ì„œ ì‹¤í–‰í•˜ê¸°

### ì „ì²´ ì‹¤í–‰ ê³¼ì •
```bash
# 1. í”„ë¡œì íŠ¸ í´ë¡ 
git clone https://github.com/asianumber7-cpu/project_v1.git
cd project_v1

# 2. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
echo "DOCKER_USERNAME=jeahun" > .env

# 3. í¬íŠ¸ í™•ì¸ (ì‚¬ìš© ì¤‘ì´ë©´ ì¢…ë£Œ)
# Windows: netstat -ano | findstr :80
# Mac/Linux: lsof -i :80

# 4. Docker ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ
docker-compose pull

# 5. ì»¨í…Œì´ë„ˆ ì‹¤í–‰
docker-compose up -d

# 6. DB ì´ˆê¸°í™”
docker-compose exec backend alembic upgrade head
docker-compose exec backend python app/import_data.py


# 7. ì ‘ì† í™•ì¸
# ë¸Œë¼ìš°ì €: http://localhost
```

### í¬íŠ¸ ì¶©ëŒ í•´ê²°

`docker-compose.yml` ìˆ˜ì •:
```yaml
services:
  frontend:
    ports:
      - "8080:80"  # 80 â†’ 8080
  backend:
    ports:
      - "8001:8000"  # 8000 â†’ 8001
  db:
    ports:
      - "3307:3306"  # 3306 â†’ 3307
```

---

## ğŸ” ê´€ë¦¬ì - ë°°í¬í•˜ê¸°

### ì½”ë“œ ë³€ê²½ í›„ ë°°í¬
```bash
# 1. ì½”ë“œ ì»¤ë°‹
git add .
git commit -m "ì„¤ëª…"
git push origin main

# 2. Docker Hub ë¡œê·¸ì¸
docker login

# 3. ì´ë¯¸ì§€ ë¹Œë“œ & í‘¸ì‹œ
docker-compose build --no-cache
docker-compose push
```

### ë¡œì»¬ í…ŒìŠ¤íŠ¸ í›„ ë°°í¬
```bash
# 1. ë¡œì»¬ í…ŒìŠ¤íŠ¸
docker-compose down -v
docker-compose build --no-cache
docker-compose up -d
docker-compose exec backend alembic upgrade head
docker-compose exec backend python -m app.seed
docker-compose exec backend python -m app.batch_embed

# 2. ë¸Œë¼ìš°ì € í…ŒìŠ¤íŠ¸
# http://localhost

# 3. ë¬¸ì œ ì—†ìœ¼ë©´ í‘¸ì‹œ
docker-compose push
git push origin main
```

---

## ğŸ› ï¸ ë¬¸ì œ í•´ê²°

### ì»¨í…Œì´ë„ˆê°€ ì‹œì‘ë˜ì§€ ì•ŠìŒ
```bash
docker-compose logs backend
docker-compose logs frontend
docker-compose down
docker-compose up -d
```

### í¬íŠ¸ ì¶©ëŒ
```bash
# Windows
netstat -ano | findstr :80
taskkill /PID [PIDë²ˆí˜¸] /F

# Mac/Linux
lsof -i :80
kill -9 [PIDë²ˆí˜¸]
```

### ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì‹¤íŒ¨
```bash
docker-compose ps
docker exec -it ai_shop_db mysql -u root -p12345
docker-compose restart db
```

### í”„ë¡ íŠ¸ì—”ë“œê°€ ì•ˆ ë³´ì„
```bash
docker-compose logs frontend
docker exec -it ai_shop_frontend ls -la /usr/share/nginx/html
docker-compose down
docker-compose build --no-cache frontend
docker-compose up -d
```

### AI ë²¡í„° ìƒì„± ì‹¤íŒ¨
```bash
# 503 ì—ëŸ¬ëŠ” ì •ìƒ (ì¼ë¶€ ì´ë¯¸ì§€ URL ë¬¸ì œ)
docker-compose exec backend python -m app.batch_embed
```

### "No module named 'aiomysql'"
```bash
# requirements.txt í™•ì¸
cat backend/requirements.txt | grep aiomysql

# ì—†ìœ¼ë©´ ì¶”ê°€ í›„ ì¬ë¹Œë“œ
echo "aiomysql==0.2.0" >> backend/requirements.txt
docker-compose build --no-cache backend
docker-compose up -d
```

### Alembic ë§ˆì´ê·¸ë ˆì´ì…˜ ì—ëŸ¬
```bash
docker-compose exec backend alembic current
docker-compose exec backend alembic upgrade head
```

### "Event loop is closed" ê²½ê³ 

**ë¬´ì‹œí•´ë„ ë©ë‹ˆë‹¤!** ì¤‘ìš”í•œ ê±´ `"10ê°œ ìƒí’ˆ ë°ì´í„° ì‹œë”© ì™„ë£Œ"` ë©”ì‹œì§€ì…ë‹ˆë‹¤.

---

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°
```
project_v1/
â”œâ”€â”€ backend/                 # FastAPI ë°±ì—”ë“œ
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ api/v1/
â”‚   â”‚   â”‚   â”œâ”€â”€ api.py
â”‚   â”‚   â”‚   â””â”€â”€ endpoints/
â”‚   â”‚   â”‚       â”œâ”€â”€ products.py
â”‚   â”‚   â”‚       â”œâ”€â”€ users.py
â”‚   â”‚   â”‚       â””â”€â”€ recommend/
â”‚   â”‚   â”‚           â”œâ”€â”€ base.py      # ê¸°ë³¸ ì¶”ì²œ
â”‚   â”‚   â”‚           â”œâ”€â”€ advanced.py  # ê³ ê¸‰ ì¶”ì²œ
â”‚   â”‚   â”‚           â””â”€â”€ utils.py
â”‚   â”‚   â”œâ”€â”€ models/         # DB ëª¨ë¸
â”‚   â”‚   â”œâ”€â”€ schemas/        # Pydantic ìŠ¤í‚¤ë§ˆ
â”‚   â”‚   â”œâ”€â”€ crud/           # DB CRUD
â”‚   â”‚   â”œâ”€â”€ db/             # ë°ì´í„°ë² ì´ìŠ¤
â”‚   â”‚   â”œâ”€â”€ seed.py         # ìƒ˜í”Œ ë°ì´í„°
â”‚   â”‚   â”œâ”€â”€ batch_embed.py  # AI ë²¡í„°
â”‚   â”‚   â””â”€â”€ main.py
â”‚   â”œâ”€â”€ alembic/            # DB ë§ˆì´ê·¸ë ˆì´ì…˜
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ requirements.txt
â”‚
â”œâ”€â”€ frontend/               # React í”„ë¡ íŠ¸ì—”ë“œ
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ api.js
â”‚   â”‚   â””â”€â”€ App.jsx
â”‚   â”œâ”€â”€ nginx.conf
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ .env
â””â”€â”€ README.md
```

---

## ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ

### Backend
- **FastAPI** 0.109.0 - ì›¹ í”„ë ˆì„ì›Œí¬
- **SQLAlchemy** 2.0.25 - ORM
- **Alembic** 1.13.1 - DB ë§ˆì´ê·¸ë ˆì´ì…˜
- **aiomysql** 0.2.0 - MySQL ë“œë¼ì´ë²„
- **Transformers** 4.37.2 - KoCLIP ëª¨ë¸
- **PyTorch** 2.2.0 - ë”¥ëŸ¬ë‹
- **Pillow** 10.2.0 - ì´ë¯¸ì§€ ì²˜ë¦¬

### Frontend
- **React** 18 - UI ë¼ì´ë¸ŒëŸ¬ë¦¬
- **Vite** 5 - ë¹Œë“œ ë„êµ¬
- **React Router** 6 - ë¼ìš°íŒ…
- **Axios** - HTTP í´ë¼ì´ì–¸íŠ¸

### Infrastructure
- **MySQL** 8.0 - ë°ì´í„°ë² ì´ìŠ¤
- **Nginx** 1.25 - ì›¹ ì„œë²„
- **Docker** - ì»¨í…Œì´ë„ˆí™”

### AI Model
- **KoCLIP** (koclip/koclip-base-pt)
  - í•œêµ­ì–´ ë©€í‹°ëª¨ë‹¬ ëª¨ë¸
  - ì´ë¯¸ì§€ ë²¡í„°: 512ì°¨ì›
  - í…ìŠ¤íŠ¸ ë²¡í„°: 512ì°¨ì›
  - ì½”ì‚¬ì¸ ìœ ì‚¬ë„ ê¸°ë°˜ ì¶”ì²œ

---

## âœ¨ ì£¼ìš” ê¸°ëŠ¥

### 1. ë©€í‹°ëª¨ë‹¬ AI ì¶”ì²œ
- ğŸ–¼ï¸ **ì´ë¯¸ì§€ ìœ ì‚¬ë„** - ì‹œê°ì ìœ¼ë¡œ ë¹„ìŠ·í•œ ìƒí’ˆ
- ğŸ“ **í…ìŠ¤íŠ¸ ê²€ìƒ‰** - ìì—°ì–´ ìƒí’ˆ ê²€ìƒ‰
- ğŸ¯ **í•˜ì´ë¸Œë¦¬ë“œ** - í‚¤ì›Œë“œ(70%) + ì´ë¯¸ì§€(30%)

### 2. ë©”íƒ€ë°ì´í„° ê¸°ë°˜ ì¶”ì²œ
- ğŸ¨ **ìƒ‰ìƒë³„** - ê°™ì€ ìŠ¤íƒ€ì¼, ë‹¤ë¥¸ ìƒ‰ìƒ
- ğŸ’° **ê°€ê²©ëŒ€ë³„** - ë¹„ìŠ·í•œ ê°€ê²©ëŒ€
- ğŸŒ¸ **ì‹œì¦Œë³„** - ë´„/ì—¬ë¦„/ê°€ì„/ê²¨ìš¸
- ğŸ‘” **ì½”ë””** - ìƒ/í•˜ì˜ ë§¤ì¹­

### 3. ì‚¬ìš©ì ê²½í—˜
- ğŸ“± ë°˜ì‘í˜• ë””ìì¸
- âš¡ ë¹ ë¥¸ ë¡œë”©
- ğŸ¨ ê¹”ë”í•œ UI/UX
- ğŸ” ì‹¤ì‹œê°„ ê²€ìƒ‰

---

## ğŸ“Š API ì—”ë“œí¬ì¸íŠ¸

### ìƒí’ˆ ê´€ë¦¬
```
GET  /api/v1/products           # ì „ì²´ ìƒí’ˆ
GET  /api/v1/products/{id}      # ìƒí’ˆ ìƒì„¸
```

### ê¸°ë³¸ ì¶”ì²œ
```
GET  /api/v1/recommend/by-product/{id}     # ìœ ì‚¬ ìƒí’ˆ
GET  /api/v1/recommend/by-text?query=ê²€ìƒ‰ì–´  # í…ìŠ¤íŠ¸ ê²€ìƒ‰
POST /api/v1/recommend/by-image-upload     # ì´ë¯¸ì§€ ì—…ë¡œë“œ
```

### ê³ ê¸‰ ì¶”ì²œ
```
GET /api/v1/recommend/by-color/{id}              # ìƒ‰ìƒë³„
GET /api/v1/recommend/by-price-range/{id}        # ê°€ê²©ëŒ€ë³„
GET /api/v1/recommend/by-season?season=ê²¨ìš¸       # ì‹œì¦Œë³„
GET /api/v1/recommend/coordination/{id}          # ì½”ë””
```

---

## ğŸš€ ê°œë°œ ê°€ì´ë“œ

### ë¡œì»¬ ê°œë°œ (Docker ì—†ì´)
```bash
# ë°±ì—”ë“œ
cd backend
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate
pip install -r requirements.txt
uvicorn app.main:app --reload

# í”„ë¡ íŠ¸ì—”ë“œ (ìƒˆ í„°ë¯¸ë„)
cd frontend
npm install
npm run dev
```



---

## ğŸ‰ ì™„ë£Œ!

ì¶•í•˜í•©ë‹ˆë‹¤! AI ì‡¼í•‘ëª°ì´ ì‹¤í–‰ë˜ì—ˆìŠµë‹ˆë‹¤.

**ë¸Œë¼ìš°ì €ì—ì„œ http://localhost ì ‘ì†í•˜ì„¸ìš”!** ğŸš€